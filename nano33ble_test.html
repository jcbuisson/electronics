<html>
  <button id="button">Search device...</button>
</html>

<script>

document.addEventListener('DOMContentLoaded', function() {
   const buttons = document.getElementsByTagName('button')
   const searchButton = buttons[0]
   
   const serviceUUID = "19B10010-E8F2-537E-4F6C-D104768A1214"

   searchButton.onclick = function() {
      navigator.bluetooth.requestDevice({
         filters: [{
            name: "ButtonLED",
         }],
         optionalServices: [serviceUUID] // Required to access service later.
      })
      .then(device => {
         console.log('device', device);
         // Attempts to connect to remote GATT Server.
         return device.gatt.connect();
      })
      .then(server => {
         console.log('server', server);
         // Getting Battery Service…
         return server.getPrimaryService(serviceUUID);
         //return server.getPrimaryService('543D55F5-DF2B-960B-4B23-5A810A9AAADA');
      })
      .then(service => {
         console.log('service', service);
         // Getting Characteristic…
         return service.getCharacteristic('19B10012-E8F2-537E-4F6C-D104768A1214');
      })
      .then(characteristic => {
         // Reading value…
         return characteristic.readValue();
      })
      .then(value => {
         console.log(`Value is ${value.getUint8(0)}`);
      })
      .catch(error => {
         console.error(error);
      });
   }

   /*const selectElt = document.getElementsByTagName('select')[0]
   selectElt.addEventListener('change', function(ev) {
      document.body.style.backgroundColor = ev.target.value
   })*/
})
 
</script>
